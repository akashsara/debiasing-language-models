
Lmod is automatically replacing "intel/2020.1.217" with "gcc/9.3.0".


Due to MODULEPATH changes, the following have been reloaded:
  1) libfabric/1.10.1     2) openmpi/4.0.3     3) ucx/1.8.0

created virtual environment CPython3.10.2.final.0-64 in 39922ms
  creator CPython3Posix(dest=/scratch/deep1401/debiasing_language_models/ENV, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/home/deep1401/.local/share/virtualenv)
    added seed packages: Pillow_SIMD==9.0.0.post1+computecanada, PyYAML==6.0+computecanada, Pygments==2.14.0, aiohttp==3.8.1+computecanada, aiosignal==1.3.1, async_timeout==4.0.2+computecanada, colorama==0.4.6, datasets==2.8.0, dill==0.3.6+computecanada, filelock==3.9.0, frozenlist==1.3.0+computecanada, fsspec==2023.1.0, huggingface_hub==0.11.1+computecanada, joblib==1.2.0+computecanada, markdown_it_py==2.1.0+computecanada, mdurl==0.1.2, multidict==6.0.4+computecanada, multiprocess==0.70.14, pip==22.3.1, python_dateutil==2.8.2+computecanada, regex==2022.1.18+computecanada, responses==0.18.0+computecanada, rich==13.2.0, scikit_learn==1.1.2+computecanada, setuptools==65.6.3, six==1.16.0+computecanada, threadpoolctl==3.1.0+computecanada, tokenizers==0.12.1+computecanada, torch==1.13.1+computecanada, torchvision==0.14.1+computecanada, tqdm==4.64.1+computecanada, transformers==4.25.1, wheel==0.38.4, xxhash==3.0.0+computecanada, yarl==1.7.2+computecanada
  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator
Traceback (most recent call last):
  File "/scratch/deep1401/debiasing_language_models/ENV/bin/pip", line 5, in <module>
    from pip._internal.cli.main import main
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/main.py", line 9, in <module>
    from pip._internal.cli.autocompletion import autocomplete
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/autocompletion.py", line 10, in <module>
    from pip._internal.cli.main_parser import create_main_parser
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/main_parser.py", line 9, in <module>
    from pip._internal.build_env import get_runnable_pip
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/build_env.py", line 20, in <module>
    from pip._internal.cli.spinners import open_spinner
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/spinners.py", line 9, in <module>
    from pip._internal.utils.logging import get_indentation
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/utils/logging.py", line 13, in <module>
    from pip._vendor.rich.console import (
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/console.py", line 46, in <module>
    from . import errors, themes
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/themes.py", line 1, in <module>
    from .default_styles import DEFAULT_STYLES
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/default_styles.py", line 3, in <module>
    from .style import Style
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/style.py", line 8, in <module>
    from .color import Color, ColorParseError, ColorSystem, blend_rgb
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/color.py", line 8, in <module>
    from ._palettes import EIGHT_BIT_PALETTE, STANDARD_PALETTE, WINDOWS_PALETTE
ModuleNotFoundError: No module named 'pip._vendor.rich._palettes'
Traceback (most recent call last):
  File "/scratch/deep1401/debiasing_language_models/ENV/bin/pip", line 5, in <module>
    from pip._internal.cli.main import main
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/main.py", line 9, in <module>
    from pip._internal.cli.autocompletion import autocomplete
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/autocompletion.py", line 10, in <module>
    from pip._internal.cli.main_parser import create_main_parser
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/main_parser.py", line 9, in <module>
    from pip._internal.build_env import get_runnable_pip
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/build_env.py", line 20, in <module>
    from pip._internal.cli.spinners import open_spinner
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/cli/spinners.py", line 9, in <module>
    from pip._internal.utils.logging import get_indentation
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_internal/utils/logging.py", line 13, in <module>
    from pip._vendor.rich.console import (
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/console.py", line 46, in <module>
    from . import errors, themes
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/themes.py", line 1, in <module>
    from .default_styles import DEFAULT_STYLES
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/default_styles.py", line 3, in <module>
    from .style import Style
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/style.py", line 8, in <module>
    from .color import Color, ColorParseError, ColorSystem, blend_rgb
  File "/scratch/deep1401/debiasing_language_models/ENV/lib/python3.10/site-packages/pip/_vendor/rich/color.py", line 8, in <module>
    from ._palettes import EIGHT_BIT_PALETTE, STANDARD_PALETTE, WINDOWS_PALETTE
ModuleNotFoundError: No module named 'pip._vendor.rich._palettes'
gender
8000
0.32
Bias Type: gender
Debias Size: 8000
LM CNN Fraction: 0.32
{'OUTPUT_PATH': '../models/gender/new_debsize_8000/lm_0.32/', 'DOWNSTREAM_OUTPUT_PATH': '../models/downstream/gender/new_debsize_8000/lm_0.32/', 'MODEL': 'roberta-base', 'TRAIN_EPOCHS': 30, 'VAL_EPOCHS': 1, 'LEARNING_RATE': 0.0001, 'MAX_SOURCE_TEXT_LENGTH': 64, 'MAX_TARGET_TEXT_LENGTH': 32, 'EARLY_STOPPING_PATIENCE': 3, 'BATCH_SIZE': 64, 'WORD_LIST': '../word_lists/gender.csv'}
{'OUTPUT_PATH': '../models/gender/new_debsize_8000/lm_0.32/', 'DOWNSTREAM_OUTPUT_PATH': '../models/downstream/gender/new_debsize_8000/lm_0.32/', 'MODEL': 'roberta-base', 'LM_TRAIN_EPOCHS': 30, 'LM_VAL_EPOCHS': 1, 'LEARNING_RATE': 0.0001, 'MAX_SOURCE_TEXT_LENGTH': 64, 'MAX_TARGET_TEXT_LENGTH': 32, 'EARLY_STOPPING_PATIENCE': 3, 'BATCH_SIZE': 64, 'WORD_LIST': '../word_lists/gender.csv', 'DOWNLOAD_CNN_DATA': True, 'CNN_DATA_PATH': '../data/cnn_dailmail_saved.pkl', 'MLM_PROBABILITY': 0.15}
Debias Model: True

LM Fine tune Model: True

INTERLEAVING EPOCH: 0
Starting Model debiasing...
DEBIAS SIZE > TRAIN SIZE. No need to run
